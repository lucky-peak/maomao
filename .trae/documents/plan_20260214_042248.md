## 重构计划

### 1. 创建知识源抽象层
- 新建 `src/maomao/sources/` 目录
- 定义 `KnowledgeSource` 抽象基类（scan/get_changes）
- 定义 `SourceRegistry` 注册机制
- 定义 `SourceItem` 统一数据结构

### 2. 实现内置源
- `SiyuanSource` - 思源笔记源
- `LocalDocSource` - 本地文档源（只处理 .md/.txt/.rst，不处理代码）

### 3. 更新配置模型
- 改为 `sources: list[SourceConfig]` 格式
- 每个源有 `type`、`enabled`、`config` 字段

### 4. 更新 Pipeline
- 使用 `SourceRegistry` 动态加载源
- 统一的导入流程

### 5. 简化 Chunker
- 移除代码分块逻辑，只保留文本分块

### 6. 更新 MCP Server
- 移除 `repo_code` 相关逻辑
- 更新工具描述

### 7. 编写 README
- 项目介绍和架构
- 安装配置指南
- 内置源说明
- 扩展新源指南